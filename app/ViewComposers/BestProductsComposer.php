<?phpnamespace App\ViewComposers;use App\Models\Order;use App\Models\Sku;use Illuminate\View\View;class BestProductsComposer{    public function compose(View $view) {        $productsArray = [];        $bestProductsIds = Order::get()->map->skus->flatten()->map->pivot->mapToGroups(function ($pivot) {            return [$pivot->sku_id => $pivot->quantity];        })->map->sum()->sortDesc()->take(3)->keys()->toArray();        $bestProducts = Sku::whereIn('id',$bestProductsIds)->get();        $view->with('bestProducts', $bestProducts);    }}