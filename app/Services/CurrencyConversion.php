<?phpnamespace App\Services;use App\Models\Currency;use Carbon\Carbon;class CurrencyConversion{    protected static $container;    public static function loadContainer() {        if(is_null(self::$container)) {            $currencies = Currency::get();            foreach ($currencies as $currency) {                self::$container[$currency->code] = $currency;            }        }    }    public static function getCurrencies() {        self::loadContainer();        return self::$container;    }    public static function convert($sum,$originCurrencyCode = 'RUB',$targetCurrencyCode = null) {        self::loadContainer();        $originCurrency = self::$container[$originCurrencyCode];        if($originCurrency['rate'] == 0 || $originCurrency['code'] !== 'RUB' && $originCurrency->updated_at->startOfDay() !== Carbon::now()->startOfDay()) {            CurrencyRates::getRates();            self::loadContainer();            $originCurrency = self::$container[$originCurrencyCode];        }        if(is_null($targetCurrencyCode)) {            $targetCurrencyCode = session('currency','RUB');        }        $targetCurrency = self::$container[$targetCurrencyCode];        if($targetCurrency['rate'] == 0 || $targetCurrency['code'] !== 'RUB' && $targetCurrency->updated_at->startOfDay() != Carbon::now()->startOfDay()) {            CurrencyRates::getRates();            self::loadContainer();            $targetCurrency = self::$container[$targetCurrencyCode];        }        return $sum / $originCurrency['rate'] * $targetCurrency['rate'];    }    //App\Services\CurrencyConversion::getCurrencySymbol()    public static function getCurrencySymbol() {        self::loadContainer();        return self::$container[session('currency','RUB')]['symbol'];    }    public static function getCurrentCurrency() {        self::loadContainer();        foreach(self::$container as $code => $currency) {            if($currency->isMain()) return $currency;        }    }}